Bootstrap: docker
From: python:3.11-slim

%files
    ../pyproject.toml /opt/django-project/pyproject.toml

%environment
    export PYTHONPATH=/opt/django-project
    # We'll source the env file in the runscript

%post
    apt-get update && apt-get install -y \
        build-essential \
        libpq-dev \
        && rm -rf /var/lib/apt/lists/*

    cd /opt/django-project
    pip install -e .[dev]

%startscript
    cd /opt/django-project
    python manage.py migrate
    python manage.py runserver 0.0.0.0:8000
