<div x-data="{
    data: [],
    layout: {
      title: {text: 'Actions VS Reward Frequency'},
      xaxis: {title: {text: 'Action'}},
      yaxis: {title: {text: 'Reward Frequency'}},
      autosize: true,
      barmode: Object.keys(actionVReward).length > 1 ? 'group' : 'stack',
      showlegend: $store.settings.showPlotLegends,
      paper_bgcolor: $store.theme.paper_bgcolor,
      plot_bgcolor: $store.theme.plot_bgcolor,
      font: $store.theme.font,
      xaxis: {
        gridcolor: $store.theme.axis.gridcolor,
        zerolinecolor: $store.theme.axis.zerolinecolor
      },
      yaxis: {
        gridcolor: $store.theme.axis.gridcolor,
        zerolinecolor: $store.theme.axis.zerolinecolor
      },
    },
    config: {
      displayModeBar: false,
    },
    plot: null,
    actionVReward: Object.keys(actionVReward).length > 1 ? actionVReward : Object.values(actionVReward)[0],
    resizePlot: _.debounce(function() {
      if (!this.$refs.actionsRewards.querySelector('.plotly')) return;
      Plotly.Plots.resize(this.$refs.actionsRewards);
    }, 200, {leading: true}),
  }"
  x-init="
    data = Object.entries(actionVReward).map(([grouping, values]) => ({
      x: Object.keys(values),
      y: Object.values(values),
      type: 'bar',
      name: grouping,
      marker: {
        line: {
          width: 2
        }
      }
    }));
    this.plot = Plotly.react($refs.actionsRewards, data, layout, config);
    $watch('$store.settings.showPlotLegends', () => {
      $nextTick(() => {
        Plotly.relayout(
          $refs.actionsRewards, {
            autosize: true,
            showlegend: $store.settings.showPlotLegends
          })
      });
    });"
  x-resize="resizePlot"
>
  <div x-ref="actionsRewards" class="w-full"></div>
</div>
